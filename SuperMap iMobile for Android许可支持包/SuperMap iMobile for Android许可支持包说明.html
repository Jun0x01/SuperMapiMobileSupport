<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="zh">
<head>
<!-- Generated by javadoc (1.8.0_181) on Fri Dec 07 09:34:43 CST 2018 -->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>SuperMap iMobile for Android 许可支持包</title>
<pre>ver 1.4</pre>
</head>
<body>
  <pre>
  <h1>SuperMap iMobile for Android 支持包</h1>
  
  <strong>0.</strong><a href="./doc/index.html">api参考</a>
  
    使用示例：
	  // 注意：由于iMobile的原因，一些版本可能会提示打开Wifi。对此，本支持包无法避免。
	  // 1. 初始化
	  LicenseEnvironment.setLicensePath(licensePath);  // 使用离线许可文件时设置，若没有可不用设置
	  LicenseEnvironment.initialization(context, sn);  // sn 为许可序列号，如果没有可以为null，如试用许可
	  
	  // 2. 获取设备ID，若有需要才调用
	  String deviceID = LicenseEnvironment.getDeviceID();    // 无需连网，无需打开Wifi
	  
	  // 3. 检查许可是否有效
	  LicenseStatus status = Environment.getLicenseStatus();
	  bool isValid = status.isLicenseValid();
	  
	  // 4. 许可在线激活；若许可无效，可考虑在线激活
	  if(!isValid){
	      LicenseUtil licenseUtil = LicenseUtil.getInstance();
		  String licSN = "XXXXX-";                 // 许可序列号，8C或9D与使用的iMobile版本对应
		  licenseUtil.setCallBack(callBack);       // callBack此处省略，请在使用时创建，由于接收激活结果
		  licenseUtil.activate(licSN);             // 执行激活，请注意此处是网络请求，为异步执行。
	  }else{
	       // 许可有效，可进行iMobile数据相关操作
	  }
	  
	  建议：为实现良好的应用体验，建议使用LaunchActivity + MainActinvity的方式。LaunchAcivity中实现授权，初始化等
  
  <strong>1.支持包说明：</strong>
      本支持包基于SuperMap iMobile for Android产品开发，支持的版本包括官网上的800,801,811，以及9D系列，而不支持未提到的早期
    版本 。
      本支持包主要解决原产品包中使用正式许可时获取设备ID和许可在线激活的问题，具体介绍如下：
      1) <a href="./doc/com/supermap/support/imobile/licence/LicenseEnvironment.html">LicenseEnvironment</a>提供setLicensePath(), initialization(), getDeviceID()三个方法用于替换
         com.supermap.data.Enviroment类中对应名称的方法。
        <a href="./doc/com/supermap/support/imobile/licence/LicenseUtil.html">LicenseUtil</a>用于替换原有产品包的在线激活功能。
      2) 增加正式许可的加密存储，因此只有提供正确的用户许可序列号才能使用正式许可。
      3) 初始化时，增加自动在线激活功能，避免用户再写激活代码。
      4) 解决原有产品中校验设备信息经常出错的问题。
      5) 解决9D部分版本激活后重启初始化后许可仍然无效，以及重复激活的问题。
      6) 兼容正在使用的正式许可，对于8C的许可和9D的离线许可文件，为保证正常使用Android 6.0及以上系统版本仍然需要开启Wifi连接
         网络，以正确获取设备信息。
      7) 需要申请离线正式许可，请通过<a href="./doc/com/supermap/support/imobile/licence/LicenseEnvironment.html#getDeviceID--">LicenseEnvironment.getDeviceID()</a>获取设备ID，该方法不要求开启wifi和联网，通过
         <a href="./doc/com/supermap/support/imobile/licence/LicenseUtil.html">LicenseUtil</a>提供的方法在线激活8C产品也可以不使用Wifi联网，而使用移动网络就可以实现。
      
      
      
  
  <strong>2.许可类型: 正式许可和试用许可</strong>
    正式许可需要通过销售渠道购买
    试用许可可以通过网上申请：http://www.supermapol.com/web/pricing/triallicense
    
  <strong>3.许可提供的形式： </strong>
       正式许可有两种形式：用户序列号和离线正式许可文件。用户序列号是在需要使用的设备上在线激活，
   而离线许可文件时根据设备ID生的正式许可文件，仅对应的设备能使用。
      试用许可是在网上申请的试用许可文件。
      
 <strong>4.许可配置方式： </strong>
   1)用户序列号: 
        使用<a href="./doc/com/supermap/support/imobile/licence/LicenseUtil.html#activate-java.lang.String-">LicenseUtil.activate(licSN)</a>或<a href="./doc/com/supermap/support/imobile/licence/LicenseUtil.html#activate-java.lang.String-java.util.ArrayList-">LicenseUtil.activate(licSN, modueList)</a>联网激活，
     同时兼容SuperMap iMobile 8C和 SuperMap iMobile 9D的许可激活，不同版本的许可只能在相应的版本应用中进行激活，且激活后会
     将许可信息加密存储，会在用户设置的许可目录中生成许可文件。激活时，建议使用<a href="./doc/com/supermap/support/imobile/licence/LicenseUtil.html#activate-java.lang.String-">LicenseUtil.activate(licSN)</a>激活全
     部模块，以避免使用模块的混乱，如果有特殊需要也可以使用另一个方法激活指定的模块。
         SuperMap iMobile 9D的用户序列号激活成功后，可以不联网使用，如果不需要许可了还可以通过<a href="./doc/com/supermap/support/imobile/licence/LicenseUtil.html#recycle-java.lang.String-">LicenseUtil.recycle(phoneNumber)</a>进行归还，
      归还后该设备将没有许可，也不占用许可数，需要时再次激活即可。
     
   2)许可文件：正式许可文件和试用许可文件
        许可文件可以放置在通过<a href="./doc/com/supermap/support/imobile/licence/LicenseEnvironment.html#setLicensePath-java.lang.String-">LicenseEnvironment.setLicensePath(licensePath)</a>设置存储目录中, 
     也可以放置在工程的assets/License目录中与应用一起打包。
        正式许可文件将会更加用户提供的用户序列号进行校验，校验通过后将加密转存，直到许可过期。 使用
     方法是通过<a href="./doc/com/supermap/support/imobile/licence/LicenseEnvironment.html#initialization-Context-java.lang.String-">LicenseEnvironment.initialization(context, licSN)</a>传入用户序列号进行初始化。
    
   3).正式许可特别说明
        无论是在线激活的还是提供许可文件，都要求提供用户序列号，程序初始化时将通过用户序列号匹
     配许可。特别的，对于集团许可文件，初始化时可以不提供用户序列号，如果提供了用户序列号，并检测到有
     效的集团许可，将对其进行关联并加密转存。当然，目前没有对加密转存过的许可文件进行删除，用户可自行
     删除。
    
    4).许可过期: 初始化时会输出过期提示，指明文件路径或用户序列号
  
 </pre>
</body>
</html>
